<!-- EMERGENCY MOBILE MENU FIX - LOAD LAST -->
<script>
console.log('ðŸš€ EMERGENCY MOBILE MENU FIX LOADING...');

// Wait for everything to load
window.addEventListener('load', function() {
  console.log('ðŸš€ Initializing emergency mobile menu fix...');
  
  function fixMobileMenu() {
    const mobileToggle = document.getElementById('mobile-toggle-btn') || document.querySelector('.navbar-mobile-toggle');
    const mobileMenu = document.querySelector('.mobile-menu');
    
    console.log('ðŸš€ Found elements:', {
      toggle: !!mobileToggle,
      menu: !!mobileMenu
    });
    
    if (!mobileToggle || !mobileMenu) {
      console.error('ðŸš€ Mobile menu elements not found!');
      return;
    }
    
    // Remove any existing handlers
    const newToggle = mobileToggle.cloneNode(true);
    mobileToggle.parentNode.replaceChild(newToggle, mobileToggle);
    
    // Simple toggle function
    function toggleMenu() {
      console.log('ðŸš€ Toggle clicked!');
      
      const isActive = mobileMenu.classList.contains('active');
      
      if (isActive) {
        // Close menu
        mobileMenu.classList.remove('active');
        mobileMenu.classList.add('hidden');
        mobileMenu.style.display = 'none';
        newToggle.classList.remove('active');
        document.body.classList.remove('menu-open');
        console.log('ðŸš€ Menu closed');
      } else {
        // Open menu
        mobileMenu.classList.remove('hidden');
        mobileMenu.classList.add('active');
        mobileMenu.style.display = 'flex';
        mobileMenu.style.visibility = 'visible';
        mobileMenu.style.opacity = '1';
        newToggle.classList.add('active');
        document.body.classList.add('menu-open');
        console.log('ðŸš€ Menu opened');
      }
    }
    
    // Add click handler
    newToggle.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      toggleMenu();
    });
    
    // Close on menu link clicks
    const menuLinks = document.querySelectorAll('.mobile-nav-link');
    menuLinks.forEach(link => {
      link.addEventListener('click', () => {
        if (mobileMenu.classList.contains('active')) {
          toggleMenu();
        }
      });
    });
    
    // Close on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && mobileMenu.classList.contains('active')) {
        toggleMenu();
      }
    });
    
    console.log('ðŸš€ Emergency mobile menu fix initialized successfully!');
  }
  
  // Initialize immediately and with delays to catch any timing issues
  fixMobileMenu();
  setTimeout(fixMobileMenu, 100);
  setTimeout(fixMobileMenu, 500);
  setTimeout(fixMobileMenu, 1000);
});

console.log('ðŸš€ Emergency mobile menu fix script loaded');
</script>
